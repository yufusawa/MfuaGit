## Git. Основы

### Зачем нужен Git?

#### Почему не флешка?

1. Флешка - потенциальный разносчик вирусов
1. Личные данные с флешки случайно могут попать на чужой компьютер
1. Антивирус ОС может удалить данные с флешки
1. Флешка может потеряться или сломаться

#### Почему не облако типа Yandex или Google?

1. Облако не контролирует версии данных
1. Своё облако на чужом компьютере - это риск утечки личных данных
1. Для работы с облаком на чужом компьтере необходим браузер, а это не безопасно
1. Нет надёжной фильтрации типов файлов для загрузки и хранения в облаке

#### Премущества Git

1. Трудно потерять свои проекты
1. Легко отслеживать версии прокта
1. Легко делиться с другими людьми своими проктами
1. Легко разрабатывать проекты совместно с другими людьми (в команде)
1. Git по умолчанию интегрирован во многие популярные средства разработки, т.к. VSCode
1. В Git можно создавать веб-страницы с описанием своих проектов
1. Многие Git-сервисы предоставляют возможность автоматизации сборки ваших проектов

#### Основные состояния git-репозитория

1. Инициализирован - ```git status``` - показать состояние текущего репозитория
2. Подготовлен (добавлены изменения) - ```git add .``` - добавление изменений
3. Сохранение - ```git commit -m 'Update README.md - fix'``` - сохранение с комментарием
4. Синхронизация с удалённым репозиторием - ```git push``` - сохранение на облачном сервисе, например `Gitflic.ru`

#### Что можно сохранять в git?

1. Обычно небольшие по объёму файлы,  < 40 mb.
1. Изображения, документы, mp3, видео
1. Все файлы с именами латинскими буквами без пробелов

[Мои заметки по базовой работе с Git](https://gitflic.ru/project/rurewa/education/blob?file=content%2FGit%2FREADME.md&branch=master&mode=markdown)


### 1. Запуск Git на персональном компьютере

Проверить установку **Git** в **Powershell**
```shell
git --version
```

Показать справку о Git
```shell
git help
```

**Сменить редактор по умолчанию:**

На **Nano** (проще для новичков):

```shell
git config --global core.editor "nano"
```

На **VS Code**:

```shell
git config --global core.editor "code --wait"
```

**Представиться системе Git (выполняется однократно, после установки Git или перед 1-м коммитом)**

Команды представления системе **Git**

```shell
git config --global user.name "Rurewa"
```

> где вместо **Rurewa** - ваш username

```shell
git config --global user.email "rurewa@mail.ru"
```

> где вместо `rurewa@mail.ru` - ваша почта

### 2. Клонировать удалённый репозиторий на свой компьютер в Git-Bash

```shell
git clone https://gitflic.ru/project/rurewa/mfua
```

> этой командой будет склонирован на ваш компьютер мой репозиторий.

### 3. Открыть папку склонированного репозитория

Проверить статус текущего репозитория

```shell
git status
```
### 5. Внести изменения в текущий репозиторий

### 6. Проверить изменения

```shell
git status
```

Показать сравнение изменения файлов до и после (до `git add`)

```git diff```

сравнение до ```git commit - m```

```git diff --staged```

> чтобы выйти из списка коммитов, выполните **Q**

> Выйти из режима сравнения, выполните **Q**

Отменить изменения
```shell
git restore README.md
```

### 7. Подготовить файлы к коммиту (добавить)

добавить все файлы и папки, включая скрытые
```shell
git add .
```

или все кроме скрытых
```shell
git add *
```

```.gitignore``` - файл, который содержит **blacklist** несохраняемых файлов.

Отменить добавленные изменения
```shell
git restore --staged README.md
```

### 8. Закоммитить (зафиксировать)

```shell
git commit -m "Some message"
```

или объединить ```git add``` и ```git commit```:
```shell
git commit -a -m 'Update README.md'
```

или
```shell
git commit -a
```

> Откроется текстовый редактор командной сроки по умолчанию, в котором нужно записать текст коммита

Изменение текста последнего коммита

```git commit --amend```

### 9. Запушить

```shell
git push
```

> Перед ```git push``` желательно выполнить ```git pull```

или сразу обе команды:
```shell
git pull && git push
```

или более "мягкий" вариант
```shell
git getch && git push
```

или, если не получилось с 1-го раза запушить, то:

```shell
git push -u origin master
```

`-u` создаёт новую ветку, если таковая не существует

где **master** - имя нужной ветки. Вместо **master** может быть **main**

### 10. Проверить изменения на сайте удалённого репозитория

Перейти на сайт проверяемого репозитория и обновить страницу в браузере **Ctrl-R** либо **F5**

### 11. Получить изменения из удалённого репозитория

```shell
git pull
```

или более "мягкий" вариант
```shell
git fetch
```

### Получить список коммитов текущего репозитория

```shell
git log
```

> чтобы выйти из списка коммитов, выполните **Q**
> для перемещения по списку коммитов, жмите стрелки **ВВЕРХ/ВНИЗ** или **Pg Up/Pg Dn** или **Home/End**

Показать подробности каждого коммита

```git log -p```

или показать подробности нескольких коммитов
```shell
git log -p -3
```
покажет 3 последних коммита

Показать краткую информацию о коммитах

```git log --stat```

> чтобы выйти из списка коммитов, выполните **Q**

Показать последний коммит кратко

```git log --stat -1```

> чтобы выйти из списка коммитов, выполните **Q**

показать несколько последних коммитов -2, -3 etc.

```git log --stat -2```

> чтобы выйти из списка коммитов, выполните **Q**

Показать хеши коммитов

```git log --oneline```

> чтобы выйти из списка коммитов, выполните **Q**

> **Хэш** - это уникальный идентификатор

Переместиться на указанный коммит назад
```shell
git checkout 94120de
```

Вернуться на последний коммит

```shell
git switch -
```

или
```shell
git checkout master
```

или вместо **master** укажите **main**

Показать настройки текущего (локального) git-репозитория

```git config --list```

Показать информацию об удалённом репозитории

Показать источники
```git remote -v```

```git remote show origin```

### Работа с git-ветками

Показать локальные ветки
```shell
git branch
```

или показать все ветки (в т.ч. удалённые)

```shell
git branch --all
```

Создать новую локальную ветку
```shell
git branch test
```

где test - это имя создаваемой ветки

Переключиться на другую ветку
```shell
git switch test
```

или

```shell
git checkout test
```

ещё можно создать новую ветку с автоматическим переходом в неё
```shell
git checkout -b test
```

Отправить новую ветку на сервер
```shell
git push --set-upstream origin test
```

где `test` -  имя отправляемой ветки

Удалить удалённую ветку
```shell
git push origin --delete test
```

Удалить локальную ветку
```shell
git branch -d test
```

### Слияние веток

Ветку **anybranch** слить с **master**

Переходим в ветку master
```shell
git switch master
```

и выполняем слияние 2-х веток в одну

```shell
git merge anybranch
```

### Файл .gitignore

"Чёрный список" файлов (их расширений), которые не нужно сохранять в проекте. Обычно это фременные файлы.

[A collection of .gitignore templates](https://github.com/github/gitignore)